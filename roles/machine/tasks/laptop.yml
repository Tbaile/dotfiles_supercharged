- name: Install TLP
  community.general.pacman:
    name:
      - tlp
  when: ansible_pkg_mgr == "pacman"

- name: Enable TLP service
  ansible.builtin.service:
    name: tlp
    enabled: true
    state: started

- name: Disable rfkill services
  ansible.builtin.systemd:
    name: "{{ item }}"
    enabled: false
    state: stopped
    masked: true
  loop:
    - systemd-rfkill.service
    - systemd-rfkill.socket
